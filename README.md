# MSanalyst
This repository contains the source code of MSanalyst. 
![MSanalystlogo](MSanalyst_logo.jpg)

# Installation
You can use the [online version](https://msanalyst.net/) or install the stand-alone version from this repository
```bash
# Downloading msanalyst library using the command 
gdown --id 1w6HF3w1KIJlTz_QaVqqtN1BzkGDhDgzw

or manually from https://drive.google.com/file/d/1w6HF3w1KIJlTz_QaVqqtN1BzkGDhDgzw/view 

or https://zenodo.org/records/17088906

# Cloning MSanalyst repository
git clone git@github.com:WenchYu/MSanalyst.git && cd MSanalyst
unzip msdb.zip -d ./ && rm msdb.zip


MSanalyst/
    └── msdb/


# Creating environment
conda create -n msanalyst python=3.8
conda activate msanalyst
pip install -r requirements.txt
```


# Quick start
## Preprocess
Before applying MSanalyst, raw mass spectrometry (MS) data should be converted using [MSconvert](https://mzmine.github.io/mzmine_documentation/data_conversion.html). 
It is recommended to use [MZmine-based untargeted LC-MS workflow](https://mzmine.github.io/mzmine_documentation/workflows/lcmsworkflow/lcms-workflow.html) 
to generate the `quant.csv` and `mgf` files as inputs. 

## Module usage
Here we briefly introduce the MSanalyst quick command start:
Using `-h` for help messages in MSanalyst: 

- `mn.py` 
for the default analysis workflow of MSanalyst.

```bash
python mn.py -m ./example/example.mgf -o ./example/
```

- `reanalysing.py ` for quick re-analysis of the results generated by `mn.py` command.

```bash
python reanalysing.py -m ./example/example.mgf -scm neutral_loss -scs 0.5 -scp 4
```

- `ms2search.py` 
for single ms<sup>2</sup> searching

```bash
python ms2search.py -qms1 319.2339 -qms2 "84.0810 1.1E2 84.0819 5.1E2 84.0829 1.3E2"
```

- `customizing.py` 
for generating a customized mass library

```bash
python customizing.py -m ./example/exampleDB.mgf -li ./example/exampleDB.xlsx -o ./msdb/
python mn.py -m ./example/example.mgf -o ./example/ -e1f ./msdb/exampleDB_ms1.csv -e2f ./msdb/exampleDB_ms2.json
```

- `multimerging.py `
for merging different molecular networks

```bash
python mn.py -m ./example/example.mgf -o ./example/
python reanalysing.py -m ./example/example.mgf -lmm entropy -scm neutral_loss -scs 0.5 -scp 4
python multimerging.py -mn1 ./example/example_result/example_modified_cosine_modified_cosine_0.7_0.graphml -mn2 ./example/example_result/example_entropy_neutral_loss_0.5_4.graphml
# Output will be generated in the mn1 folder by default
```

## Documentation
Please see the following links for detailed instructions, parameter usage and more information.
- [Online documentation](https://msanalyst.net/a/about) 
- [Video tutorials](https://msanalyst.net/a/about)
- MSanalyst library can be downloaded at [Google drive](https://drive.google.com/file/d/1w6HF3w1KIJlTz_QaVqqtN1BzkGDhDgzw/view) or [Zenodo](https://zenodo.org/records/17088906)

# 
MSanalyst was carefully tested, bugs may appear. Don't hesitate to contact us or open an issue. 
For other inquiries, please email us and we will be happy to answer you.
